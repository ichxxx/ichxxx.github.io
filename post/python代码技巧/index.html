<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="zh-cn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Python代码技巧 | ichx&#39;s Blog</title>



<link rel="stylesheet" href="/css/style.css"/><link rel='stylesheet' href='https://ichxxx.github.io/css/custom.css'><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<link rel="canonical" href="https://ichxxx.github.io/post/python%E4%BB%A3%E7%A0%81%E6%8A%80%E5%B7%A7/">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
<section class="section">
  <div class="container">
    <nav id="nav-main" class="nav">
      <div id="nav-name" class="nav-left">
        <a id="nav-anchor" class="nav-item" href="https://ichxxx.github.io">
          <h1 id="nav-heading" class="title is-4">ichx&#39;s Blog</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav id="nav-items" class="nav-item level is-mobile"><a class="level-item" aria-label="github" href='https://github.com/ichxxx'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="email" href='mailto:chen@ichxxx.cn'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
  <script src="/js/navicon-shift.js"></script>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/python/">#Python</a>




      
    </div>
    <h2 class="subtitle is-6">December 24, 2019</h2>
    <h1 class="title">Python代码技巧</h1>
    
    <div class="content">
      <h2 id="交换值">交换值</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a, b <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">10</span>
a, b <span style="color:#f92672">=</span> b, a
<span style="color:#66d9ef">print</span>(a,b)
<span style="color:#75715e"># 10 5</span>
</code></pre></div><h2 id="连接列表所有元素为一个字符串">连接列表所有元素为一个字符串</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;Python&#39;</span>, <span style="color:#e6db74">&#39;is&#39;</span>, <span style="color:#e6db74">&#39;awesome&#39;</span>]
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39; &#39;</span><span style="color:#f92672">.</span>join(a))
<span style="color:#75715e"># Python is awesome</span>
</code></pre></div><h2 id="寻找列表中频数最高的值">寻找列表中频数最高的值</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">1</span>]
f <span style="color:#f92672">=</span> max(set(a), key <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span>count)
<span style="color:#66d9ef">print</span>(f)
<span style="color:#75715e"># 2</span>
</code></pre></div><h2 id="判断两个字符串是否回文">判断两个字符串是否回文</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> Counter
Counter(str1) <span style="color:#f92672">==</span> Counter(str2)
</code></pre></div><h2 id="反转字符串列表">反转字符串/列表</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;abcdefghijklmn&#39;</span>
b <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>]

<span style="color:#66d9ef">print</span>(a[::<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
<span style="color:#75715e"># nmlkjihgfedcba</span>

<span style="color:#66d9ef">print</span>(b[::<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
<span style="color:#75715e"># [5, 4, 3, 2, 1]</span>
</code></pre></div><h2 id="转置二维数组">转置二维数组</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a <span style="color:#f92672">=</span> [[<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>], [<span style="color:#e6db74">&#39;c&#39;</span>, <span style="color:#e6db74">&#39;d&#39;</span>], [<span style="color:#e6db74">&#39;e&#39;</span>, <span style="color:#e6db74">&#39;f&#39;</span>]]

a_t <span style="color:#f92672">=</span> zip(<span style="color:#f92672">*</span>a)
<span style="color:#66d9ef">print</span>(list(a_t))

<span style="color:#75715e"># [(&#39;a&#39;, &#39;c&#39;, &#39;e&#39;), (&#39;b&#39;, &#39;d&#39;, &#39;f&#39;)]</span>
</code></pre></div><h2 id="链式比较">链式比较</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>

<span style="color:#66d9ef">print</span>(<span style="color:#ae81ff">4</span> <span style="color:#f92672">&lt;</span> a <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">7</span>)
<span style="color:#75715e"># True</span>

<span style="color:#66d9ef">print</span>(<span style="color:#ae81ff">1</span> <span style="color:#f92672">==</span> a <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">20</span>)
<span style="color:#75715e"># False</span>
</code></pre></div><h2 id="链式函数调用">链式函数调用</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#e6db74">&#39;&#39;&#39;使用相同变量根据条件调用不同函数&#39;&#39;&#39;</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">func_1</span>(a, b):
  <span style="color:#66d9ef">return</span> a <span style="color:#f92672">*</span> b

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">func_2</span>(a, b):
  <span style="color:#66d9ef">return</span> a <span style="color:#f92672">+</span> b

<span style="color:#66d9ef">print</span>((func_1 <span style="color:#66d9ef">if</span> True <span style="color:#66d9ef">else</span> func_2)(<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">7</span>))
<span style="color:#75715e"># 35</span>
</code></pre></div><h2 id="复制列表">复制列表</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>]

<span style="color:#e6db74">&#39;&#39;&#39;这样子a和b的第一项都会改变&#39;&#39;&#39;</span>
b <span style="color:#f92672">=</span> a
b[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>

<span style="color:#66d9ef">print</span>(a, b)
<span style="color:#75715e"># [10, 2, 3, 4, 5] [10, 2, 3, 4, 5]</span>

<span style="color:#e6db74">&#39;&#39;&#39;这样子只有b的第一项会改变&#39;&#39;&#39;</span>
b <span style="color:#f92672">=</span> a[:]
b[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>

<span style="color:#66d9ef">print</span>(a, b)
<span style="color:#75715e"># [1, 2, 3, 4, 5] [10, 2, 3, 4, 5]</span>

<span style="color:#e6db74">&#39;&#39;&#39;使用类型转换复制列表&#39;&#39;&#39;</span>
b <span style="color:#f92672">=</span> list(a)

<span style="color:#e6db74">&#39;&#39;&#39;使用 list.copy() 方法复制列表（只支持Python3）&#39;&#39;&#39;</span>
b <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span>copy()

<span style="color:#e6db74">&#39;&#39;&#39;使用 copy.deepcopy 复制嵌套列表&#39;&#39;&#39;</span>
<span style="color:#f92672">from</span> copy <span style="color:#f92672">import</span> deepcopy

l <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>]]
l2 <span style="color:#f92672">=</span> deepcopy(l)
</code></pre></div><h2 id="获取字典值">获取字典值</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#e6db74">&#39;&#39;&#39;当键值不在字典里时，返回 None 或者默认值&#39;&#39;&#39;</span>
d <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;a&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;b&#39;</span>: <span style="color:#ae81ff">2</span>}

<span style="color:#66d9ef">print</span>(d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;c&#39;</span>))
<span style="color:#75715e"># None</span>

<span style="color:#66d9ef">print</span>(d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;c&#39;</span>, <span style="color:#ae81ff">3</span>)
<span style="color:#75715e"># 3</span>
</code></pre></div><h2 id="按字典的值排序">按字典的值排序</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">d <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;a&#39;</span>: <span style="color:#ae81ff">10</span>, <span style="color:#e6db74">&#39;b&#39;</span>: <span style="color:#ae81ff">20</span>, <span style="color:#e6db74">&#39;c&#39;</span>: <span style="color:#ae81ff">5</span>, <span style="color:#e6db74">&#39;d&#39;</span>: <span style="color:#ae81ff">1</span>}

<span style="color:#66d9ef">print</span>(sorted(d<span style="color:#f92672">.</span>items(), key <span style="color:#f92672">=</span> <span style="color:#66d9ef">lambda</span> x: x[<span style="color:#ae81ff">1</span>]))
<span style="color:#75715e"># [(&#39;d&#39;, 1), (&#39;c&#39;, 5), (&#39;a&#39;, 10), (&#39;b&#39;, 20)]</span>

<span style="color:#66d9ef">print</span>(sorted(d, key<span style="color:#f92672">=</span>d<span style="color:#f92672">.</span>get))
<span style="color:#75715e"># [&#39;d&#39;, &#39;c&#39;, &#39;a&#39;, &#39;b&#39;]</span>
</code></pre></div><h2 id="for-else">For Else</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#e6db74">&#39;&#39;&#39;当for循环没有触发嵌套的if判断时，会触发else&#39;&#39;&#39;</span>
a <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>]

<span style="color:#66d9ef">for</span> each <span style="color:#f92672">in</span> a:
  <span style="color:#66d9ef">if</span> each <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;bad&#39;</span>)
<span style="color:#66d9ef">else</span>:
  <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;awesome&#39;</span>)

<span style="color:#75715e"># awesome</span>
</code></pre></div><h2 id="将列表转换为符号分割的字符串">将列表转换为符号分割的字符串</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">items <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;foo&#39;</span>, <span style="color:#e6db74">&#39;bar&#39;</span>, <span style="color:#e6db74">&#39;xyz&#39;</span>]
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;,&#39;</span><span style="color:#f92672">.</span>join(items))
<span style="color:#75715e"># foo,bar,xyz</span>

<span style="color:#e6db74">&#39;&#39;&#39;数字列表转换&#39;&#39;&#39;</span>
nums <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>]
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;,&#39;</span><span style="color:#f92672">.</span>join(map(str, nums)))
<span style="color:#75715e"># 1,2,3,4</span>

<span style="color:#e6db74">&#39;&#39;&#39;混合列表转换&#39;&#39;&#39;</span>
data <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;Hello&#39;</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3.4</span>]
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;,&#39;</span><span style="color:#f92672">.</span>join(map(str, nums)))
<span style="color:#75715e"># 1,Hello,2,3.4</span>
</code></pre></div><h2 id="合并字典">合并字典</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">d1 <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;a&#39;</span>: <span style="color:#ae81ff">1</span>}
d2 <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;b&#39;</span>: <span style="color:#ae81ff">2</span>}

<span style="color:#75715e"># python3.5</span>
<span style="color:#66d9ef">print</span>({<span style="color:#f92672">**</span>d1, <span style="color:#f92672">**</span>d2})
<span style="color:#75715e"># {&#39;a&#39;: 1, &#39;b&#39;: 2}</span>

<span style="color:#66d9ef">print</span>(dict(d1<span style="color:#f92672">.</span>items() <span style="color:#f92672">|</span> d2<span style="color:#f92672">.</span>items()))
<span style="color:#75715e"># {&#39;b&#39;: 2, &#39;a&#39;: 1}</span>

d1<span style="color:#f92672">.</span>update(d2)
<span style="color:#66d9ef">print</span>(d1)
<span style="color:#75715e"># {&#39;a&#39;: 1, &#39;b&#39;: 2}</span>
</code></pre></div><h2 id="列表中的最大和最小索引">列表中的最大和最小索引</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">l <span style="color:#f92672">=</span> [<span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">30</span>]

<span style="color:#66d9ef">print</span>(l<span style="color:#f92672">.</span>index(min(l)))
<span style="color:#75715e"># 2</span>

<span style="color:#66d9ef">print</span>(l<span style="color:#f92672">.</span>index(max(l)))
<span style="color:#75715e"># 1</span>
</code></pre></div><h2 id="删除列表中的重复项">删除列表中的重复项</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#e6db74">&#39;&#39;&#39;删除后不保持原列表的顺序&#39;&#39;&#39;</span>
items <span style="color:#f92672">=</span> [<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span>]

<span style="color:#66d9ef">print</span>(list(set(items)))
<span style="color:#75715e"># [1, 2, 3]</span>

<span style="color:#e6db74">&#39;&#39;&#39;删除后保持原列表顺序&#39;&#39;&#39;</span>
<span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> OrderedDict

<span style="color:#66d9ef">print</span>(list(OrderedDict<span style="color:#f92672">.</span>fromkeys(items)<span style="color:#f92672">.</span>keys()))
<span style="color:#75715e"># [2, 3, 1]</span>
</code></pre></div><p>翻译和修改自 《<a href="https://hackernoon.com/python-tricks-101-2836251922e0">Python Tricks 101</a>》 by Gautham Santhosh</p>

      
      <div class="related">
</div>
      
    </div>
    
  </div>
</section>



<section class="section">
  <div class="container has-text-centered">
    <p></p>
    
  </div>
</section>



</body>
</html>

